$(function(){function o(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function a(t,a){if(t.ok){var i,e="";for(i in t=t.data){var s=c(t[i].avatar,t[i].email,48);e+='<li\tclass="pull-left"><div class="avatar"><a href="/user/'+t[i].username+'" title="'+t[i].username+'"><img alt="'+t[i].username+'" class="img-circle" src="'+s+'" width="48px" height="48px"></a></div><div class="name" style="white-space: nowrap;"><a style="word-break: normal;" href="/user/'+t[i].username+'" title="'+t[i].username+'">'+t[i].username+"</a></div></li>"}$(".sb-content "+a+" ul").html(e)}}$(".sidebar .top ul li").on("mouseenter",function(t){t.target.tagName,$(this).parent().find("a").removeClass("cur"),$(this).children("a").addClass("cur");var a=$(this).parents(".top").next(),i=0;switch(a.children().removeClass("hidden").hide(),$(this).attr("class")){case"first":a.children(".first").show(),i="18px";break;case"second":a.children(".second").show(),i="114px";break;case"last":a.children(".last").show(),i="210px"}$(this).parents(".top").children(".bar").animate({left:i},"fast")});var s,t,c=function(t,a,i){return""==t?t=isHttps?"https://secure.gravatar.com/avatar/"+md5(a)+"?s="+i:"http://gravatar.com/avatar/"+md5(a)+"?s="+i:0==t.indexOf("http")?t+="&s="+i:t=cdnDomain+"avatar/"+t+"?imageView2/2/w/"+i,t},i=(emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),{"/topics/recent":{func:function(t){if(t.ok){var a,i="";for(a in t=t.data){var e=o(t[a].title);i+='<li class="truncate"><i></i><a href="/topics/'+t[a].tid+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .topic-list ul").html(i)}},class:".topic-list"},"/articles/recent":{func:function(t){if(t.ok){var a,i="";for(a in t=t.data){var e=o(t[a].title);i+='<li class="truncate"><i></i><a href="/articles/'+t[a].id+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .article-list ul").html(i)}},class:".article-list"},"/projects/recent":{func:function(t){if(t.ok){var a,i="";for(a in t=t.data){var e=t[a].id,s=(""!=t[a].uri&&(e=t[a].uri),t[a].category+" "+t[a].name),n=t[a].logo,s=o(s);i+='<li><a href="/p/'+e+'"><div class="logo"><img src="'+n+'" alt="'+t[a].name+'" width="48px"/></div></a><div class="title"><h4><a href="/p/'+e+'?fr=sidebar" title="'+s+'">'+s+"</a></h4></div></li>"}$(".sb-content .project-list ul").html(i)}},class:".project-list"},"/resources/recent":{func:function(t){if(t.ok){var a,i="";for(a in t=t.data){var e=o(t[a].title);i+='<li class="truncate"><i></i><a href="/resources/'+t[a].id+'?fr=sidebar" title="'+e+'">'+e+"</a></li>"}$(".sb-content .resource-list ul").html(i)}},class:".resource-list"},"/comments/recent":{func:function(t){if(t.ok){var a,i=(t=t.data).comments,e="";for(a in i){var s=i[a].objinfo.uri,n=(6!=i[a].objtype&&(s+=i[a].objid),t[i[a].uid]),r=c(n.avatar,n.email,40),l=SG.timeago(i[a].ctime);l==i[a].ctime&&(l=l.split(" ")[0]),e+='<li><div class="pic"><a href="/user/'+n.username+'" target="_blank"><img src="'+r+'" alt="'+n.username+'" width="40px" height="40px"></a></div><div class="word"><div class="w-name"><a href="/user/'+n.username+'" target="_blank" title="'+n.username+'">'+n.username+'</a><span title="'+i[a].ctime+'">'+l+'</span></div><div class="w-page"><span>在 <a href="'+s+'#commentForm" title="'+i[a].objinfo.title+'">'+i[a].objinfo.title+'</a> 中评论</span></div><div class="w-comment"><span>'+i[a].content+"</span></div></div></li>"}$(".sb-content .cmt-list ul").html(e),emojify.run($(".sb-content .cmt-list ul").get(0))}},class:".cmt-list"},"/users/active":{func:function(t){a(t,"#active-list")},class:"#active-list"},"/users/newest":{func:function(t){a(t,"#newest-list")},class:"#newest-list"},"/websites/stat":{func:function(t){var a;t.ok&&(a="<li>会员数: <span>"+(t=t.data).user+"</span> 人</li>",0<t.topic&&(a+="<li>主题数: <span>"+t.topic+"</span> 个</li>"),0<t.article&&(a+="<li>文章数: <span>"+t.article+"</span> 篇</li>"),0<t.comment&&(a+="<li>回复数: <span>"+t.comment+"</span> 条</li>"),0<t.resource&&(a+="<li>资源数: <span>"+t.resource+"</span> 个</li>"),0<t.project&&(a+="<li>项目数: <span>"+t.project+"</span> 个</li>"),0<t.book&&(a+="<li>图书数: <span>"+t.book+"</span> 本</li>"),$(".sb-content .stat-list ul").html(a))},class:".stat-list"},"/readings/recent":{func:function(t){if(t.ok)if((t=t.data)&&0!=t.length){var a="";if(1==t.length)a='<li><a href="/readings/'+(t=t[0]).id+'" target="_blank">'+t.content+"</a></li>";else for(var i in t)a+='<li><a href="/readings/'+t[i].id+'"><div class="time"><span>10-25</span></div></a><div class="title"><h4><a href="/readings/'+t[i].id+'">'+t[i].content+"</a></h4></div></li>";$(".sb-content .reading-list ul").html(a)}else $(".sb-content .reading-list").parents(".sidebar").hide()},class:".reading-list"},"/nodes/hot":{func:function(t){if(t.ok&&null!=(t=t.data)){var a,i="";for(a in t)i+='<li><a href="/go/'+t[a].ename+'?fr=sidebar" title="'+t[a].name+'">'+t[a].name+"</a></li>";$(".sb-content .node-list ul").html(i)}},class:".node-list"},"/friend/links":{func:function(t){if(t.ok&&null!=(t=t.data)){var a,i="";for(a in t)i+='<li style="margin-left:15px; margin-bottom:5px;"><a href="'+t[a].url+'" target="_blank" title="'+t[a].name+'">'+t[a].name+"</a></li>";$(".sb-content .friendslink-list ul").html(i)}},class:".friendslink-list"},"/rank/view":{func:function(t,a){if(t.ok){var i,e=(data=t.data).list,s="";for(i in e){var n=data.path+e[i].id,r=e[i].title;switch(data.objtype){case 0:n=data.path+e[i].tid;break;case 4:r=e[i].category+e[i].name,""!=e[i].uri&&(n=data.path+e[i].uri);break;case 5:r=e[i].name}var r=o(r),l=parseInt(i,10)+1,c="",c=l<4?'<img src="'+cdnDomain+"static/img/rank_medal"+l+'.png" width="20px">':"<em>"+l+"</em>";s+="<li>"+c+'<a href="'+n+'?fr=sidebar" title="'+r+'">'+r+"</a> - "+e[i].rank_view+" 阅读</li>"}$(".sb-content .rank-list").each(function(t){$(this).data("objtype")==data.objtype&&$(this).data("rank_type")==data.rank_type&&$(this).children().html(s)})}},class:".rank-list",data_keys:["objtype","rank_type"]}});if(void 0!==SG.SIDE_BARS)for(var n in SG.SIDE_BARS)void 0!==i[SG.SIDE_BARS[n]]&&(s=i[SG.SIDE_BARS[n]],0!=(t=$(".sidebar .sb-content "+s.class)).length)&&(s.data_keys?t.each(function(t){var a,i={limit:$(this).data("limit")};for(a in s.data_keys){var e=s.data_keys[a];i[e]=$(this).data(e)}$.ajax({type:"get",url:SG.SIDE_BARS[n],data:i,dataType:"json",success:s.func,ifModified:!0})}):(""==(t=t.data("limit"))&&(t=10),$.ajax({type:"get",url:SG.SIDE_BARS[n],data:{limit:t},dataType:"json",success:s.func,ifModified:!0})))});