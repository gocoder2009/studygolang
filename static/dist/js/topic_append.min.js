!function(){emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),SG.TopicAppend=function(){},SG.TopicAppend.prototype=new SG.Publisher,jQuery(document).ready(function(t){t(".need-autogrow").autoGrow(),t("#content").on("keydown",function(e){var t,n,i;9==e.keyCode&&(e.preventDefault(),e=this.selectionStart,n=this.selectionEnd,i=(t="\t")+(i=window.getSelection().toString()).replace(/\n/g,"\n\t"),this.value=this.value.substring(0,e)+i+this.value.substring(n),this.setSelectionRange(e+t.length,e+i.length))}),t("#content").on("input propertychange",function(){var e=t(this).val(),e=(marked=SG.markSettingNoHightlight())(e),e=SG.replaceCodeChar(e);t("#content-preview").html(e),emojify.run(t("#content-preview").get(0))}),t("#submit").on("click",function(e){if(e.preventDefault(),!t(".validate-form").validate().form())return!1;(new SG.TopicAppend).publish(this)}),t(document).keypress(function(e){!e.ctrlKey||10!=e.which&&13!=e.which||t("#submit").click()}),SG.registerAtEvent()})}.call(this);