var websocket,SG={};function goTop(){$(window).scroll(function(e){100<$(window).scrollTop()?$("#gotop").fadeIn(500):$("#gotop").fadeOut(500)})}SG.EMOJI_DOMAIN="https://cdnjs.cloudflare.com/ajax/libs/emojify.js/1.1.0/images/basic",SG.Publisher=function(){},SG.Publisher.prototype={publish:function(o,t){var n=$(o).text(),a=($(o).text("稍等").addClass("disabled").attr({title:"稍等",disabled:"disabled"}),$(o).parents("form")),e=a.serialize(),i=a.attr("action");$.ajax({type:"post",url:i,data:e,dataType:"json",success:function(e){e.ok?(a.get(0).reset(),void 0!==e.msg?comTip(e.msg):comTip("发布成功！"),void 0!==t?t(e.data):setTimeout(function(){var e=a.data("redirect");e&&(window.location.href=e)},1e3)):comTip(e.error)},complete:function(e,t){$(o).text(n).removeClass("disabled").removeAttr("disabled").attr({title:n})},error:function(e,t,a){$(o).text(n).removeClass("disabled").removeAttr("disabled").attr({title:n}),403==e.status&&comTip("没有修改权限")}})}},SG.replaceSpecialChar=function(e){return e=(e=(e=(e=(e=e.replace(/&#34;/g,'"')).replace(/&#39;/g,"'")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&amp;/g,"&")},SG.markSetting=function(){var e=new marked.Renderer;return e.html=function(e){return-1!=e.indexOf("<script")||-1!=e.indexOf("<input")||-1!=e.indexOf("<select")||-1!=e.indexOf("<textarea")?e.replace(/</g,"&lt;"):e},marked.setOptions({renderer:e,highlight:function(e){return e=SG.replaceSpecialChar(e),hljs.highlightAuto(e).value}}),marked},SG.markSettingNoHightlight=function(){var e=new marked.Renderer;return e.html=function(e){return-1!=e.indexOf("<script")||-1!=e.indexOf("<input")||-1!=e.indexOf("<select")||-1!=e.indexOf("<textarea")?e.replace(/</g,"&lt;"):e},marked.setOptions({renderer:e,highlight:function(e){return e=SG.replaceSpecialChar(e)}}),marked},SG.replaceCodeChar=function(e){return(e=e.replace(/<code class="lang-/g,'<code class="language-')).replace(/<code>.*<\/code>/g,function(e,t,a){return SG.replaceSpecialChar(e)})},SG.preProcess=function(e){return e=e.replace(/&gt;/g,">")},SG.analyzeAt=function(e){var a=[];return String(e).replace(/[^@]*@([^\s@]{4,20})\s*/g,function(e,t){a.push(t)}),a},SG.registerAtEvent=function(e,t,a){var o,n;void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===a&&(a=$("form textarea")),e&&(o={},a.atwho({at:"@",tpl:"<li data-value='${atwho-at}${username}'><img src='${avatar}' height='20' width='20' /> ${username}</li>",search_key:"username",callbacks:{remote_filter:function(e,t){var a=e,e=$(this);e.data("active")||(e.data("active",!0),"object"==typeof(n=o[a])?t(n):(e.xhr&&e.xhr.abort(),e.xhr=$.getJSON("/at/users",{term:a},function(e){o[a]=e,t(e)})),e.data("active",!1))}}})),t&&a.atwho({at:":",data:window.emojis,tpl:"<li data-value='${key}'><img src='"+SG.EMOJI_DOMAIN+"/${name}.png' height='20' width='20' /> ${name}</li>"})},jQuery(document).ready(function(r){r.timeago.settings.cutoff=864e7,SG.timeago=function(e){return r.timeago(e)},r(".timeago").timeago(),r(".tool-tip").tooltip(),r("#gotop").click(function(e){r("body,html").animate({scrollTop:0},100)}),goTop(),window.comTip=function(e){r("<div>").addClass("comTip").text(e).appendTo("body");var a=setInterval(function(){var e,t;r(".comTip").width()&&(clearInterval(a),e=(r(window).width()-r(".comTip").outerWidth())/2,t=((t=(r(window).height()-r(".comTip").outerHeight())/2)<0?0:t)+r(window).scrollTop(),r(".comTip").css({left:e,top:t}).fadeIn(500),setTimeout(function(){r(".comTip").fadeOut(1e3)},1800),setTimeout(function(){r(".comTip").remove()},3e3))},500)},window.openPop=function(e){var t,a;hadPop||(hadPop=!0,e=r(e),t=(r(window).width()-e.outerWidth())/2,a=((a=(r(window).height()-e.outerHeight())/2)<0?0:a)+r(window).scrollTop(),e.css({left:t,top:r(window).scrollTop(),opacity:0,display:"block"}).animate({left:t,top:a,opacity:1},500),r("#sg-overlay").css({width:r(document).width(),height:r(document).height()}).fadeIn(300))},window.closePop=function(){hadPop=!1,r(".pop").hide(),r("#sg-overlay").fadeOut(300)},r("#sg-overlay").click(function(){closePop()}),r("#login-pop .login-form form").on("submit",function(e){e.preventDefault();var e=r("#form_username").val(),t=r("#form_passwd").val();""==e?r("#form_username").parent().addClass("has-error"):""==t?r("#form_passwd").parent().addClass("has-error"):r.post("/account/login",r(this).serialize(),function(e){e.ok?location.reload():r("#login-pop .login-form .error").text(e.error).show()})}),r("#username, #passwd").on("focus",function(){r("#login-pop .login-form .error").hide()});function t(a,o){var e,t,n;1!=r("#is_login_status").val()?openPop("#login-pop"):(e=r(a).data("objid"),t=r(a).data("objtype"),n=(n=parseInt(r(a).data("flag"),10))?0:1,r.post("/like/"+e,{objtype:t,flag:n},function(e){var t;e.ok?(r(a).data("flag",n),t=parseInt(r(a).children(".likenum").text(),10),n?(comTip("感谢赞！"),r(a).attr("title","取消赞").text("取消赞"),t++):(comTip("已取消赞！"),r(a).attr("title","赞").text("赞"),t--),r(a).children(".likenum").text(t),o(t,n)):alert(e.error)}))}function a(e,t){var a,o,n;1!=r("#is_login_status").val()?openPop("#login-pop"):(a=r(e).data("objid"),o=r(e).data("objtype"),n=(n=parseInt(r(e).data("collect"),10))?0:1,r.post("/favorite/"+a,{objtype:o,collect:n},function(e){e.ok?t(n):alert(e.error)}))}r(".page #content-zan a").on("click",function(e){e.preventDefault();var o,n,t,i;o=this,n=function(e,t){},1!=r("#is_login_status").val()?openPop("#login-pop"):(e=r(o).data("objid"),t=r(o).data("objtype"),i=(i=parseInt(r(o).data("flag"),10))?0:1,r.post("/like/"+e,{objtype:t,flag:i},function(e){var t,a;e.ok?(r(o).data("flag",i),a=""==(a=(t=r(o).find(".likenum")).text())?0:parseInt(a,10),i?(r(o).attr("title","取消赞"),r(o).children("i").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"),a++):(r(o).attr("title","赞"),r(o).children("i").removeClass("fa-thumbs-up").addClass("fa-thumbs-o-up"),a--),a<=0?t.text(""):t.text(a),n(a,i)):alert(e.error)}))}),r(".page #content-thank a").on("click",function(e){e.preventDefault();t(this,function(e,t){})}),r(".suspended-panel .like-btn").on("click",function(e){e.preventDefault();var o=this;t(".page #content-thank a",function(e,t){var a=r(o).attr("badge");t?(a++,r(o).addClass("active")):(a--,r(o).removeClass("active")),r(o).attr("badge",a),1==a?r(o).addClass("with-badge"):0==a&&r(o).removeClass("with-badge")})}),r(".article .metatag .like").on("click",function(e){e.preventDefault();var a=this;t(a,function(e,t){t?r(a).children("i").removeClass("glyphicon-heart-empty").addClass("glyphicon-heart"):r(a).children("i").removeClass("glyphicon-heart").addClass("glyphicon-heart-empty")})}),r(".zan-operation").on("click",function(e){e.preventDefault();var a,o,t,n,i=this;a=i,o=function(e,t){t?r(i).addClass("active"):r(i).removeClass("active")},1!=r("#is_login_status").val()?openPop("#login-pop"):(e=r(a).data("objid"),t=r(a).data("objtype"),n=(n=parseInt(r(a).data("flag"),10))?0:1,r.post("/like/"+e,{objtype:t,flag:n},function(e){var t;e.ok?(r(a).data("flag",n),t=parseInt(r(a).children(".zan-num").text(),10),n?(comTip("感谢赞！"),r(a).children(".zan-word").text("已赞"),t++):(comTip("已取消赞！"),r(a).children(".zan-word").text("赞"),t--),r(a).children(".zan-num").text(t),o(t,n)):alert(e.error)}))});r(".page .collect").on("click",function(e){e.preventDefault();a(this,function(e){r(".page .collect").data("collect",e),e?(comTip("感谢收藏！"),r(".page .collect").attr("title","取消收藏").text("取消收藏")):(r(".page .collect").attr("title","稍后再读").text("加入收藏"),comTip("已取消收藏！"))})}),r(".suspended-panel .collect-btn").on("click",function(e){e.preventDefault();var t=this;a(".page .collect",function(e){r(".page .collect").data("collect",e),e?(r(t).addClass("active"),comTip("感谢收藏！"),r(".page .collect").attr("title","取消收藏").text("取消收藏")):(r(t).removeClass("active"),r(".page .collect").attr("title","稍后再读").text("加入收藏"),comTip("已取消收藏！"))})}),r(".article .metatag .collect").on("click",function(e){e.preventDefault();var t=this;a(t,function(){r(t).parents("article").fadeOut()})}),r(".qrcode").on("mouseover",function(e){r(".qrcode-pop").show()}),r(".qrcode").on("mouseout",function(e){r(".qrcode-pop").hide()});var o=!1,n=(r(".wechat-btn").on("mouseover",function(e){o?r(this).children("img").show():(new QRCode(this,{text:location.href,width:256,height:256}),o=!0)}),r(".wechat-btn").on("mouseout",function(e){r(this).children("img").hide()}),r(".comment-btn").on("click",function(e){var t=location.href;-1==t.indexOf("#commentForm")?location.href=t+"#commentForm":location.href=t}),window.saveComposeDraft=function(e,t,a){lscache.set(t+":compose:by:"+e,a,525600),console.log("Compose draft for UID "+e+" is saved")},window.loadComposeDraft=function(e,t){t=lscache.get(t+":compose:by:"+e);return console.log("Loaded compose draft for UID "+e),t},window.purgeComposeDraft=function(e,t){lscache.remove(t+":compose:by:"+e),console.log("Purged compose draft for UID "+e)},window.saveReplyDraft=function(e,t,a,o){lscache.set(t+":"+a+":reply:by:"+e,o,525600),console.log("Reply draft for "+t+":"+a+" is saved")},window.loadReplyDraft=function(e,t,a){e=lscache.get(t+":"+a+":reply:by:"+e);return console.log("Loaded reply draft for "+t+":"+a),e},window.purgeReplyDraft=function(e,t,a){lscache.remove(t+":"+a+":reply:by:"+e),console.log("Purged reply draft for "+t+":"+a)},setTimeout(function(){r(".page .content img").each(function(){r(this).hasClass("emoji")||r(this).hasClass("no-zoom")||r(this).addClass("img-responsive").attr("data-action","zoom")}),r(".page .content img").on("click",function(){r(this).parents(".box_white").css("overflow","visible")})},1e3),"");r("#reload-captcha").on("click",function(e){e.preventDefault(),""==n&&(n=r(this).attr("src")),r(this).attr("src",n+"?reload="+(new Date).getTime())}),setTimeout(function(){r(".page .content table").addClass("table").wrap('<div class="table-responsive"></div>')},2e3)}),window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket&&((websocket=new WebSocket(wsUrl)).onopen=function(e){},websocket.onclose=function(e){},websocket.onmessage=function(e){switch((data=JSON.parse(e.data)).type){case 0:var t=$("#user_message_count .badge"),a=parseInt(t.text(),10);0<(totalVal=parseInt(data.body)+a)?t.addClass("badge-warning").text(totalVal):t.removeClass("badge-warning").text(0);break;case 1:$("#onlineusers").text(data.body.online),data.body.maxonline&&$("#maxonline").text(data.body.maxonline)}},websocket.onerror=function(e){});var hadPop=!1;$(function(){$(window).scroll(function(){var e=parseFloat($(window).height())+parseFloat($(window).scrollTop());$(document).height()<=e&&$("#is_login_status").val(),$(".navbar").css("position",0<$(window).scrollTop()?"fixed":"relative"),0<$(window).scrollTop()?$("#wrapper").css("margin-top","52px"):$("#wrapper").css("margin-top","-20px")}),$("#login-pop .close").on("click",function(){closePop()})}),function(){jQuery(document).ready(function(a){a("form .md-toolbar .edit").on("click",function(e){e.preventDefault(),a(this).addClass("cur");e=a(this).parents(".md-toolbar");e.find(".preview").removeClass("cur"),e.nextAll(".content-preview").hide(),e.next().show()}),a("form .md-toolbar .preview").on("click",function(e){e.preventDefault(),marked=SG.markSettingNoHightlight(),a(this).addClass("cur");var e=a(this).parents(".md-toolbar"),t=(e.find(".edit").removeClass("cur"),e.next()),t=(t.hide(),t.val()),e=e.nextAll(".content-preview");e.html(marked(t)),e.show()}),a("form .preview_btn").on("click",function(e){e.preventDefault(),marked=SG.markSettingNoHightlight();var e=a("form .md-toolbar"),t=(e.find(".preview").addClass("cur"),e.find(".edit").removeClass("cur"),e.next()),t=(t.hide(),t.val()),e=e.nextAll(".content-preview");e.html(marked(t)),e.show()})})}.call(this),window.initPLUpload=function(n){(n=n||{}).ele=n.ele||"upload-img",n.fileUploaded=n.fileUploaded||function(e,t){var a=$(n.ele).parents(".md-toolbar").next().children("textarea"),o=(a=0==a.length?$(".main-textarea"):a).val();o+="!["+e.name+"]("+t.data.url+")",a.val(o)};var e=new plupload.Uploader({browse_button:n.ele,url:"/image/upload",filters:{mime_types:[{title:"图片文件",extensions:"jpg,gif,png,bmp"}],max_file_size:"5mb",prevent_duplicates:!0},multi_selection:!1,file_data_name:"img"});return e.init(),e.bind("FilesAdded",function(e,t){e.start()}),e.bind("UploadProgress",function(e,t){}),e.bind("FileUploaded",function(e,t,a){var o;200==a.status?(o=$.parseJSON(a.response)).ok?n.fileUploaded(t,o):comTip("上传失败："+o.error):comTip("上传失败：HTTP状态码："+a.status)}),e.bind("Error",function(e,t){comTip("上传出错了："+t.message)}),e},$(function(){initPLUpload()}),jQuery(document).ready(function(){$(".upload_img_single").Huploadify({auto:!0,fileTypeExts:"*.png;*.jpg;*.JPG;*.bmp;*.gif",multi:!1,fileSizeLimit:5242880,uploader:"/image/upload",buttonText:"上传",fileObjName:"img",showUploadedPercent:!0,onUploadSuccess:function(e,t){var a;(t=$.parseJSON(t)).ok?(a=t.data.url,$(".img_url").val(a),$("img.show_img").attr("src",a),$("a.show_img").attr("href",a)):window.jAlert?jAlert(t.error,"错误"):alert(t.error)}})}),function(){window.Comment={},$(document).ready(function(){var e;function r(e,t){var e=$('.markdown[data-floor="'+e+'"]'),a=e.children(".content"),e=e.children(".edit-wrapper");t?(a.show(),e.hide()):(a.hide(),e.show(),(t=e.children("textarea")).val(t.data("raw-content")).focus())}$(".page-comment #commentForm textarea").on("click",function(){1!=$("#is_login_status").val()&&openPop("#login-pop")}),$("#comment-content").on("change",function(){var e=$(this).val();saveReplyDraft(uid,keyprefix,objid,{content:e})}),"undefined"!=typeof keyprefix&&(e=loadReplyDraft(uid,keyprefix,objid))&&$("#comment-content").val(e.content),$(".page").on("click",".comment-edit-tab",function(e){e.preventDefault();var e=$(this),t=e.parent(),a=t.data("comment-group");e.addClass("cur"),t.children(".comment-preview-tab").removeClass("cur"),$('.comment-content-preview[data-comment-group="'+a+'"]').hide(),$('.comment-content-text[data-comment-group="'+a+'"]').show()}),$(".page").on("click",".comment-preview-tab",function(e){e.preventDefault();var e=SG.markSettingNoHightlight(),t=$(this).addClass("cur").parent(),a=t.data("comment-group"),o=$('.comment-content-preview[data-comment-group="'+a+'"]'),a=$('.comment-content-text[data-comment-group="'+a+'"]'),t=(t.children(".comment-edit-tab").removeClass("cur"),a.hide(),a.children("textarea").val());o.html(e(t)),emojify.run(o.get(0)),o.show(),Prism.highlightAll()}),$("#replies").on("mouseenter",".reply",function(e){$(this).find(".op-reply").removeClass("hideable")}),$("#replies").on("mouseleave",".reply",function(e){$(this).find(".op-reply").addClass("hideable")}),$("#replies").on("click",".reply_user",function(e){$(e.target).hasClass("reply_user")&&$(this).parents(".reply-to-block").find(".markdown").toggleClass("dn")}),$("#replies").on("click",".btn-edit",function(e){e.preventDefault();var t,e=$(this).data("floor"),a=$('.markdown[data-floor="'+e+'"]').children(".edit-wrapper").children("textarea"),e=(r(e,!1),$('.upload-img[data-floor="'+e+'"]'));a.data("paste-uploader")||(t=a.pasteUploadImage("/image/paste_upload"),a.data("paste-uploader",t)),e.data("uploader")||(a=window.initPLUpload({ele:e[0]}),e.data("uploader",a))}),$("#replies").on("click",".btn.cancel",function(e){e.stopPropagation(),r($(this).data("floor"),!0)}),$("#replies").on("click",".btn.submit",function(e){e.stopPropagation();var t=$(this).data("floor"),e=$('.markdown[data-floor="'+t+'"]'),a=$(this),o=e.children(".edit-wrapper").find("textarea"),n=e.children(".content"),i=o.val(),e=a.data("cid");l(a,e,i,function(){o.data("raw-content",i),n.html(d(i)),r(t,!0)})}),$("#replies").on("click",".btn-reply",function(e){e.preventDefault();var e=$(this).data("floor"),t=$(this).data("username"),a=$(".md-toolbar .reply-to"),o=(a.data("floor",e).data("username",t),"回复#"+e+"楼");a.children(".fa-mail-reply").attr("title",o),a.children(".user").attr("title",o).attr("href","#reply"+e).text(t+" #"+e),a.removeClass("dn"),$("#commentForm textarea").focus()}),$(".md-toolbar .reply-to .close").on("click",function(e){e.preventDefault(),$(this).parents(".reply-to").addClass("dn").data("floor","").data("username","")}),$("#comment-content").pasteUploadImage("/image/paste_upload"),emojify.setConfig({only_crawl_id:null,img_dir:SG.EMOJI_DOMAIN,ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}}),window.loadComments=function(e){e=e||0;var t=$(".comment-list").data("objid"),a=$(".comment-list").data("objtype");$.getJSON("/object/comments",{objid:t,objtype:a,p:e},function(e){if(e.ok){var t,a=(e=e.data).comments,o=e.reply_comments,n="";for(t in a){var i,r=a[t],l=$('[name="me-uid"]').val(),s=e[r.uid],c=s.avatar,c=(""==c?isHttps?s.avatar="https://secure.gravatar.com/avatar/"+md5(s.email)+"?s=48":s.avatar="http://gravatar.com/avatar/"+md5(s.email)+"?s=48":-1===c.indexOf("http")&&(s.avatar=cdnDomain+"avatar/"+c+"?imageView2/2/w/48"),SG.timeago(r.ctime));c==r.ctime?(i=c.split(" "),r.cmt_time=i[0]):r.cmt_time=c,0<r.reply_floor&&(i=o[r.reply_floor],r.reply_user=e[i.uid],r.reply_content=i.content),r.rawContent=r.content,r.content=d(r.content),n+=$.templates("#one-comment").render({comment:r,user:s,me:{uid:l}})}""!=n&&($(".comment-list .words").html(n),$(".comment-list .words .markdown").on("mousedown","a",function(e){$(this).attr("href");$(this).attr("target","_blank")}),$(".comment-list .markdown img").attr("data-action","zoom"),$(".comment-list .markdown img").on("click",function(){$(this).parents(".box_white").css("overflow","visible")})),$(".comment-list .words").removeClass("hide"),$(".comment-list .words").find('code[class*="language-"]').parent("pre").addClass("line-numbers"),Prism.highlightAll(),emojify.run($(".comment-list .words").get(0)),1==$("#is_login_status").val()&&SG.registerAtEvent(!0,!0,$(".page-comment textarea"))}else comTip("回复加载失败")})};var d=function(e){return e=SG.markSettingNoHightlight()(e=SG.preProcess(e)),SG.replaceCodeChar(e)},l=($("#comment-submit").on("click",function(){var e,t=$("#commentForm textarea").val();""==t?alert("其实你想说点什么..."):(e=$(".md-toolbar .reply-to").data("floor"),0<parseInt(e,10)&&(t="#"+e+"楼 @"+$(".md-toolbar .reply-to").data("username")+" "+t),a($(this),t,function(e){comTip("回复成功！"),purgeReplyDraft(uid,keyprefix,objid),$("#commentForm textarea").val(""),$(".md-toolbar .reply-to .close").click()}))}),function(t,e,a,o){t.text("稍等").addClass("disabled").attr({title:"稍等",disabled:"disabled"}),$.ajax({type:"post",url:"/object/comments/"+e,data:{content:a},dataType:"json",success:function(e){e.ok?(comTip("修改成功！"),o(),t.text("提交").removeClass("disabled").removeAttr("disabled").attr({title:"提交"})):alert(e.error)},error:function(){t.text("提交").removeClass("disabled").removeAttr("disabled").attr({title:"提交"})}})}),a=function(e,i,r){e.text("稍等").addClass("disabled").attr({title:"稍等",disabled:"disabled"});var t=$(".comment-list").data("objid"),a=$(".comment-list").data("objtype"),o=SG.analyzeAt(i);$.ajax({type:"post",url:"/comment/"+t,data:{objtype:a,content:i,usernames:o.join(",")},dataType:"json",success:function(e){var t,a,o,n;e.ok?(o=e.data,a=$(".comment-list"),t=$('[name="me-uid"]').val(),(n={}).username=a.data("username"),n.uid=a.data("uid"),n.avatar=a.data("avatar"),o.cmt_time=SG.timeago(o.ctime),0<o.reply_floor&&(o.content=i.substr(1)),o.reply_floor=0,o.rawContent=o.content,o.content=d(o.content),a=$.templates("#one-comment").render({comment:o,user:n,is_new:!0,me:{uid:t}}),o=$("#replies .cmtnum"),0==(n=parseInt(o.text(),10))&&$(".comment-list .words").html(""),$(".comment-list .words").append(a).removeClass("hide"),Prism.highlightAll(),emojify.run($(".comment-list .words .reply:last").get(0)),SG.registerAtEvent(!0,!0,$(".page-comment textarea")),o.text(++n),setTimeout(function(){$(".comment-list .words .reply").removeClass("light")},2e3),r()):alert(e.error)},complete:function(){e.text("提交").removeClass("disabled").removeAttr("disabled").attr({title:"提交"})},error:function(){e.text("提交").removeClass("disabled").removeAttr("disabled").attr({title:"提交"})}})}}),$(".page_input").on("keydown",function(e){13==e.keyCode&&(e=$(this).val(),$(".cmt-page .page-num a:nth-child("+e+")").trigger("click"))}),$(".ctrl-page button").on("click",function(){var e=$(".cmt-page .page_input").val();$(this).hasClass("prev-page")?e--:e++,$(".cmt-page .page-num a:nth-child("+e+")").trigger("click")}),$(".ctrl-page button").on("mouseover",function(){$(this).hasClass("disable_now")||$(this).addClass("hover_now")}),$(".ctrl-page button").on("mousedown",function(){$(this).addClass("active_now")}),$(".ctrl-page button").on("mouseleave",function(){$(this).removeClass("hover_now"),$(this).removeClass("active_now")}),$(".cmt-page .page-num a").on("click",function(e){e.preventDefault(),$(".page-num .page_current").removeClass("page_current").addClass("page_normal");var e=$(this).data("page"),t=$(".cmt-page .page_input").attr("max");return $(".cmt-page .page-num a:nth-child("+e+")").removeClass("page_normal").addClass("page_current"),$(".page-num .page_input").val(e),$(".cmt-page .ctrl-page button").removeClass("disable_now").removeAttr("disabled"),1==e?$(".cmt-page .prev-page").removeClass("hover_now").removeClass("active_now").addClass("disable_now").attr("disabled","disabled"):e==t&&$(".cmt-page .next-page").removeClass("hover_now").removeClass("active_now").addClass("disable_now").attr("disabled","disabled"),loadComments(e),!1})}.call(this);